# Milestones

- [x] **M0: Bootstrap**
  - CLI skeleton for `openfxc-sem analyze` with stdin/file IO and JSON output per `docs/TDD.md`.
  - Semantic JSON schema drafted and sample outputs captured.
  - Basic smoke run wiring.
- [x] **M1: Symbol Table Baseline**
  - Collect globals, locals, parameters, functions, structs/typedefs, samplers/resources, cbuffers/tbuffers.
  - Parent-child relationships and declaration node links recorded.
  - Unit tests for symbol presence across simple shaders.
- [x] **M2: Type Inference Core**
  - Scalars/vectors/matrices/arrays/resources and function signatures represented (structured SemType model across symbols/expressions).
  - Expression inference for arithmetic, swizzles, indexing, constructors, casts with constructor shape/arity validation and binary mismatch diagnostics.
  - Positive/negative inference tests added (constructor over-fill, binary type mismatch, array declarator preservation).
- [x] **M3: Intrinsic Resolution**
  - Intrinsic catalog (initial set: mul/dot/normalize/saturate/tex2D) with deterministic signatures.
  - Arity/type checking with diagnostics on misuse (HLSL2001 for bad overload/arity).
  - Intrinsic-focused unit and negative tests added.
- [x] **M4: Semantics and Entry Points**
  - Normalize legacy and `SV_*` semantics; bind to params/returns and symbols; diagnostics for invalid/missing.
  - Entry-point resolution (default and `--entry`), stage derived from profile with missing-entry diagnostics.
  - Tests for semantics binding, normalization, duplicates, missing semantics, and entry selection diagnostics.
- [x] **M5: Profile Awareness**
  - Profile metadata propagated; stage derived from profile; system-value semantics guarded on pre-SM4; basic stage/semantic guards.
  - Tests for profile propagation and enforced rules via semantics validation.
- [x] **M6: Diagnostics Stability**
  - Stable diagnostic IDs/messages/spans for unknown identifiers, type errors, wrong arity, duplicates, intrinsic misuse.
  - JSON span invariants validated across fixtures and clamped to source bounds.
- [ ] **M7: Snapshots and Integration**
  - Semantic JSON snapshots for representative shaders (VS passthrough, texture PS, SM4/5 cbuffer/structured resource cases).
  - Integration smoke: `openfxc-hlsl parse` -> `openfxc-sem analyze` across SM1-SM5 using this repo's `samples/` as sources; env-gated DXSDK full sweep.
  - CLI smoke for stdin/file IO and required options; snapshot baselines kept in repo.
- [ ] **M8: Tooling and CI**
  - Consolidated test runner (`tests/run-all.*`) for unit/negative/snapshot/CLI smoke suites and DXSDK sweep toggle.
  - Docs/README/compatibility matrix kept in sync; devlogs recorded; release checklist established.
- [ ] **M9: Release Readiness (Semantic Parity)**
  - Semantic coverage per `docs/TDD.md` across SM1-SM5, including SM4/5 cbuffer/tbuffer and structured/RW resources; no known crashers; stable outputs and diagnostics.
  - FX construct stance documented (supported or diagnosed); compatibility matrix locked; regression suite green.
