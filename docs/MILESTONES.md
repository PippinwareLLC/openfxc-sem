# Milestones

- [x] **M0: Bootstrap**
  - CLI skeleton for `openfxc-sem analyze` with stdin/file IO and JSON output per `docs/TDD.md`.
  - Semantic JSON schema drafted and sample outputs captured.
  - Basic smoke run wiring.
- [x] **M1: Symbol Table Baseline**
  - Collect globals, locals, parameters, functions, structs/typedefs, samplers/resources, cbuffers/tbuffers.
  - Parent-child relationships and declaration node links recorded.
  - Unit tests for symbol presence across simple shaders.
- [x] **M2: Type Inference Core**
  - Scalars/vectors/matrices/arrays/resources and function signatures represented (structured SemType model across symbols/expressions).
  - Expression inference for arithmetic, swizzles, indexing, constructors, casts with constructor shape/arity validation and binary mismatch diagnostics.
  - Positive/negative inference tests added (constructor over-fill, binary type mismatch, array declarator preservation).
- [x] **M3: Intrinsic Resolution**
  - Intrinsic catalog (initial set: mul/dot/normalize/saturate/tex2D) with deterministic signatures.
  - Arity/type checking with diagnostics on misuse (HLSL2001 for bad overload/arity).
  - Intrinsic-focused unit and negative tests added.
- [x] **M4: Semantics and Entry Points**
  - Normalize legacy and `SV_*` semantics; bind to params/returns and symbols; diagnostics for invalid/missing.
  - Entry-point resolution (default and `--entry`), stage derived from profile with missing-entry diagnostics.
  - Tests for semantics binding, normalization, duplicates, missing semantics, and entry selection diagnostics.
- [x] **M5: Profile Awareness**
  - Profile metadata propagated; stage derived from profile; system-value semantics guarded on pre-SM4; basic stage/semantic guards.
  - Tests for profile propagation and enforced rules via semantics validation.
- [x] **M6: Diagnostics Stability**
  - Stable diagnostic IDs/messages/spans for unknown identifiers, type errors, wrong arity, duplicates, intrinsic misuse.
  - JSON span invariants validated across fixtures and clamped to source bounds.
- [x] **M7: Snapshots and Integration**
  - Semantic JSON snapshots for representative shaders (SM2 passthrough VS, SM2 texture PS, SM4 cbuffer VS) committed.
  - Integration smoke: `openfxc-hlsl parse` -> `openfxc-sem analyze` across SM1-SM5 using this repo's `samples/` as sources; env-gated DXSDK full sweep.
  - CLI smoke for stdin/file IO (snapshot tests) with baselines kept in repo.
- [x] **M8: Tooling and CI**
  - Consolidated test runner (`tests/run-all.*`) for unit/negative/snapshot/CLI smoke suites and DXSDK sweep toggle.
  - Docs/README/compatibility matrix kept in sync; devlogs recorded; release checklist established.
- [x] **M8.1: SM4/SM5 Resource Semantics**
  - Capture cbuffer/tbuffer symbols and members; add structured/RW resource types and semantics binding.
  - Expand intrinsic/profile coverage for SM4/SM5-era builtins and resource overloads.
  - Tests and snapshots for SM4/SM5 shaders (cbuffer, structured buffer, RW resources).
- [x] **M8.2: Snapshot and Sweep Hardening**
  - Golden semantic snapshots expanded (SM2 VS/PS, SM4 cbuffer VS, SM5 structured buffer).
  - Full DXSDK sweep (env-gated) kept green; snapshot regressions reviewed/locked; compatibility matrix updated.
  - FX construct stance noted (entry-only; technique/pass semantics not computed).
- [x] **M9: Release Readiness (Semantic Parity)**
  - Semantic coverage per `docs/TDD.md` across SM1-SM5, including SM4/5 cbuffer/tbuffer and structured/RW resources; no known crashers; stable outputs and diagnostics.
  - FX construct stance documented (entry-only; technique/pass semantics not computed); compatibility matrix locked; regression suite green.
